---
description: Список заметок про работу с linux для devops
category: list
tags: linux
title: Linux
---
## Как перезагрузить сервер

`sudo reboot` или `sudo shutdown -r now`

Последний вариант предпочтительнее, так как позволяет указать причину перезагрузки

```shell
sudo shutdown -r now 'System maintenance'
```

## Группы и юзеры

`who` или так `whoami`  или так `echo $USER` юзер

с подробностями: `w`

`id -g` текущая группа

`id -G` все группы, в которых состоит текущий юзер

имена вмето айдишников `id -Gn` или так `groups`

## Права

`sudo chmod 777 name_of_partition` это выдает вообще все права

Подробнее [как выдать более ограниченно](https://askubuntu.com/a/628898)

## Диски и др.устройства

`sudo fdisk -l1` доступные диски. `fdisc` позволяет управлять разделами (требует рут права). Другой вариант через утилиту `parted`

`blkid /dev/discname` аналог. Флаг -p дает подробную инфу. Если надо без рут прав: `lsblk /dev/discname`

Утилита `dd` позволяет замерить быстродействие (острожно, т.к. влечет запись перезапись). Запускать лучше через `iostat`. Более точно измеряет быстродействие `fio`

[Как добавить диск на ubuntu](https://askubuntu.com/questions/125257/how-do-i-add-an-additional-hard-drive)

## Сетевые утилиты

ssh-туннелирование через утилиту `ssh`, позволяющую создавать соединение и перенаправлять порты

Оценка быстродействия [[http]] с поможью `ab` - [[apache-banchmark]]

Нагрузочное [[тестирование]] с помощью python приложения [[molotov]] - асинхронный тестировщик нагрузки приложения.

## CPU

Простейший способ через `ps`

`ps -eo pcpu,pid,user,args | sort -r | head -10`

Интерактивно - черехз `htop`. [Смотри тут](https://htop.dev/). [Статья на баше](https://habr.com/ru/post/316806/)

## Процессы

Все процессы `ps auxw`. Фильрация по конкретным запросам `ps auxw | grep root | -v grep` - в данном случае находятся все рут процессы, за исключением самого grep. Можно задать псевдоним:

```shell
alias pg='ps aux | grep -v grep | grep $1'

pg something
```

## How To Assign Output of a Linux Command to a Variable

```bash
variable_name=$(command)
variable_name=$(command [option ...] arg1 arg2 ...)
# OR
variable_name='command'
variable_name='command [option ...] arg1 arg2 ...'
```

Другие ресурсы:

- [[linux-scp]]
- [[linux-snap]]
- [[shell-comans-in-one-line]]
- [[makefile]]

Статьи:

- [How To Read and Set Environmental and Shell Variables on Linux](https://www.digitalocean.com/community/tutorials/how-to-read-and-set-environmental-and-shell-variables-on-linux)
- [How to find the processes that are consuming the most server resources](https://www.digitalocean.com/community/questions/how-to-find-the-processes-that-are-consuming-the-most-server-resources)

[//begin]: # "Autogenerated link references for markdown compatibility"
[http]: http "Http"
[apache-banchmark]: ../notes/apache-banchmark "Apache banchmark"
[тестирование]: тестирование "Основные принципы тестровния"
[molotov]: ../notes/molotov "Molotov"
[linux-scp]: ../notes/linux-scp "Linux-scp"
[linux-snap]: ../notes/linux-snap "Linux-snap"
[shell-comans-in-one-line]: ../notes/shell-comans-in-one-line "Shell comand in one line"
[makefile]: ../notes/makefile "Makefile"
[//end]: # "Autogenerated link references"