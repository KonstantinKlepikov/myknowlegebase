---
title: Несколько вопросов о MongoDB и mongoengine
description: None в mongoDB, return to dict и Pymongo API TypeError.
category: post
---
В заметке о нескольких важных нюансах и приемах работы с MongoDB из python.

## None в поле БД

Проще всего в mongoengine воспользоваться таким определением:

```python
class Person(Document):
    name = StringField(null=True)

person = Person().save()

# check raw object that got stored
pymongo_coll = Person._get_collection()
assert pymongo_coll.find_one() == {'_id': person.id, 'name': None}
```

## Convert mongodb return object to dictionary

```python
import json
json.loads(yourobj.to_json())
```

Или, можно использовать SON объект, возвращаемый методом `to_mongo()`

```python
# -> Posts.objects.all()

sons = [ob.to_mongo() for ob in qset]
for son in sons:
    print str(son.to_dict())
```

или для единственного объекта:

```python
object.to_mongo().to_dict()
```

more ideas on [stackoverflow](https://stackoverflow.com/questions/13230284/convert-mongodb-return-object-to-dictionary)

## [Pymongo API TypeError: Unhashable dict](https://stackoverflow.com/questions/17674100/pymongo-api-typeerror-unhashable-dict)

You have added extra/redundant curly braces

Смотри еще:

- [[mongodb]]
- [[mongoengine]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[mongodb]: ../notes/mongodb "MongoDB"
[mongoengine]: ../notes/mongoengine "Object Object-Document Mapper for MongoDB"
[//end]: # "Autogenerated link references"