---
description: Модули subprocess и signal в стандартной библиотеке python
tags: python-standart-library
---
# Управление процессами в python

## [subprocess](https://docs.python.org/3/library/subprocess.html)

Предоставляет АПИ, позволяющий создавать дополнительные процесс и обмениваться данными с ними. Модуль поддерживает обмен через стандартные каналы ввода-вывода, поэтому удобен для работы с текстом.

Предоставляются три основных интрумента:

- `run()` - интерфейс для выполнения процесса с возможностью захвата его выхода
- `Popen` - класс, используемый для создания других более сложных интерфейсов
- функции `call()`, `check_call()`, `check_out()` старый интерфейс, активно использовавшийся в python2. Их поведение можно полностью реализовать с помощью `run()` и `Popen`

Функционал, предоставленный модулем, заменяет собой `os.system()`, `os.spawn()`, версии `popen()` из `os`, а также модуль `commands`. [Подробнее об этом](https://docs.python.org/3/library/subprocess.html#replacing-older-functions-with-the-subprocess-module)

Доступно:

- создание процессов
- выполнение команд
- обработка ошибок
- перехват или подавление выхода
- односторонее и двустороннее взаимодействие с процессом
- объединение каналов стандартного вывода и ошибок
- создание субпроцессов
- объединение процессов в конвеер
- обмен данными между процессами

## [signal](https://docs.python.org/3/library/signal.html?highlight=signal#module-signal)

Реализует ассинхронный обмен данными между процессами и позволяет создавать обработчики для событий.

Сигналы - это средство операционнй системы, обеспечтвающее доставку уведомлений о наступлении событий и ассинхронную обработку уведомлений. Сигналы можно посылать из процесса в процесс.

Сигналы прерывают ход выполнения программы. что может вести к ошибкам (особенно это касается ввода-вывода), если сигнал получен в момент выполнения.

Формат сигналов специфичен платформе и определяется в заголовочных файлах C операционной системы.

Обработчик сигналов Python не выполняется внутри обработчика сигналов низкого уровня (C). Вместо этого обработчик сигналов низкого уровня устанавливает флаг, который сообщает виртуальной машине выполнить соответствующий обработчик сигнала Python в более поздний момент (например, в следующей инструкции байт-кода). Это приводит к некоторым [нюансам в обработке ошибок](https://docs.python.org/3/library/signal.html?highlight=signal#execution-of-python-signal-handlers)

Обработчики сигналов Python всегда выполняются в основном потоке Python основного интерпретатора, даже если сигнал был получен в другом потоке. Это означает, что сигналы нельзя использовать как средство межпоточного взаимодействия. Кроме того, только основной поток основного интерпретатора может устанавливать новый обработчик сигналов.

Пример

```python
import signal, os

def handler(signum, frame):
    print('Signal handler called with signal', signum)
    raise OSError("Couldn't open device!")

# Set the signal handler and a 5-second alarm
signal.signal(signal.SIGALRM, handler)
signal.alarm(5)

# This open() may hang indefinitely
fd = os.open('/dev/ttyS0', os.O_RDWR)

signal.alarm(0)          # Disable the alarm
```

[[python-standart-library]]

Смотри еще [[threading]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[python-standart-library]: ../lists/python-standart-library "Стандартная библиотека python - список заметок"
[threading]: threading "threading"
[//end]: # "Autogenerated link references"