---
description: Библиотека для обработки изображений в python
title: Pillow - обработка изображений
tags: ml
---

```python
>>> from PIL import Image
>>> im = Image.open("empire.jpg")

>>> print(im.format, im.size, im.mode)
PPM (512, 512) RGB

>>> import matplotlib.pyplot as pl
>>> pl.figure()
>>> pl.imshow(im)
```

![](../attachments/2022-05-28-00-55-29.png)

```python
>>> # copy and insert boxes
>>> im = Image.open('data/empire.jpg')
>>> box = (100, 100, 400, 400) # order - left, top, right, bottom coordinates
>>> region = im.crop(box)

>>> # operations with box and insertion
>>> region = region.transpose(Image.ROTATE_180)
>>> # sinse 10.0.0 is deprecated - use Image.Transpose.ROTATE_180
>>> im.paste(region, box)
>>> pl.figure()
>>> pl.imshow(im)
```

![empire.jpg rotated](../attachments/2022-05-28-00-55-58.png)

```python
>>> out = im.resize((150, 150))
>>> pl.figure()
>>> pl.imshow(out)
```

![empire.jpg resized](../attachments/2022-05-28-00-58-49.png)

```python
>>> out = im.rotate(45)
>>> pl.figure()
>>> pl.imshow(out)
```

![empire.jpg rotated](../attachments/2022-05-28-00-59-54.png)

```python
# merging
def merge(im1, im2):
    w = im1.size[0] + im2.size[0]
    h = max(im1.size[1], im2.size[1])
    im = Image.new("RGBA", (w, h))

    im.paste(im1)
    im.paste(im2, (im1.size[0], 0))

    return im

n = merge(out, out)
pl.figure()
pl.imshow(n)
```

![merging](../attachments/2022-05-28-01-33-00.png)

```python
# spliting and merging bands
r, g, b = im.split()
im = Image.merge("RGB", (b, g, r))
pl.figure()
pl.imshow(im)
```

![spliting and merging](../attachments/2022-05-28-01-33-31.png)

```python
# point transforms
out = im.point(lambda i: i * 1.2)
pl.figure()
pl.imshow(out)
```

![points transform](../attachments/2022-05-28-01-34-08.png)

```python
# Processing individual bands (with paste() method)

# split the image into individual bands
source = im.split()

R, G, B = 0, 1, 2

# select regions where red is less than 100
mask = source[R].point(lambda i: i < 100 and 255)

# process the green band
out = source[G].point(lambda i: i * 0.7)

# paste the processed band back, but only where red was < 100
source[G].paste(out, None, mask)

# build a new multiband image
out = Image.merge(im.mode, source)

pl.figure()
pl.imshow(out)
```

![Processing individual bands](../attachments/2022-05-28-01-35-06.png)

- [more basic operations](https://pillow.readthedocs.io/en/stable/handbook/tutorial.html)
- [more about Image module](https://pillow.readthedocs.io/en/stable/reference/Image.html)

Смотри еще:

- [docks](https://pillow.readthedocs.io/en/stable/index.html)
- [[python-standart-library]]
- [[computer-visions]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[python-standart-library]: ../lists/python-standart-library "Стандартная библиотека python и полезные ресурсы"
[computer-visions]: ../lists/computer-visions "Computer visions"
[//end]: # "Autogenerated link references"