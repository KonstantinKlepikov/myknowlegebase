---
description: Декораторы в python. Примеры
tags: python-standart-library
---
# Python decorator

Декораторм в python является функция, возвращающая другую функцию. Обычно применяется как преобразование функции с использованием синтаксиса `@wrapper`. Распространенными примерами декораторов являются `classmethod()` и `staticmethod()`.

Cледующие два определения декоратора семантически эквивалентны:

```python
def f(...):
    ...
f = staticmethod(f)

@staticmethod
def f(...):
    ...
```

Примеры декораторов:

Функция декоратор принимает другую функцию, передает ее аргументы обертке и возвращает результат вычислений

```python
>>> def deco(this):
...     def wrapper(*args, **kwargs):
...         print('wrap')
...         return this(*args, **kwargs)
...     return wrapper

>>> @deco
>>> def main(a, b=2):
...     print(f'in main {a} != {b}')
    
>>> main(1)
wrap
in main 1 != 2
```

Класс-декоратор реализует тот же механизм в методе `__call__`

```python
>>> class This:
...     def __call__(self, this):
...         def wrapper(*args, **kwargs):
...             print('wrap')
...             return this(*args, **kwargs)
...         return wrapper
        
>>> @This()
>>> def main_cls(a, b=2):
...     print(f'in main {a} != {b}')
    
>>> main_cls(1)
wrap
in main 1 != 2
```

Декоратор класса принимает класс вмест офункцйии и реализует метод, декорирующий методы класса

```python
>>> def cls_deco(cls):
...     def wrapper(*args, **kwargs):
...         print('wrap')
...         wrapper.instance = cls(*args, **kwargs)
...         return wrapper.instance
...     return wrapper
    
>>> @cls_deco
>>> class Main:
...     def __init__(self, a, b=2):
...         self.a = a
...         self.b = b
    
...     def what(self):
...         return f'in Main {self.a} != {self.b}'

>>> c = Main(1)
>>> print(c.what())
wrap
in main 1 != 2
```

Подробнее о [декорировании функций](https://docs.python.org/3/reference/compound_stmts.html#function) и [декорирвоании классов](https://docs.python.org/3/reference/compound_stmts.html#class)

[[python-standart-library]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[python-standart-library]: ../lists/python-standart-library "Стандартная библиотека python и полезные ресурсы"
[//end]: # "Autogenerated link references"