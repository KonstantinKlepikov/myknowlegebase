# промежуточная-среда-(staging)

Среда, полностью воспроизводящая окружение [[build-боевая-среда]]

Использовать:

- инфраструктуру как услугу ([PaaS](https://en.wikipedia.org/wiki/Platform_as_a_service)) против вирутального выделенного сервера (VPS)
- использовать [[fabric]]
- управление конфигурацией [[puppet]], [[chef]], [[salt]], [[ansimble]]
- [[vargant]]
- продумать все сложные точки развертывания
- создать [[cl-сервер]] как можно раньше, чтобы не опираться на самодисциплину

Развертывание - способ [[тестирование]], когда веб-ресурс разворачивается в окружении, идентичном боевому. [[приемочные-тесты]] проводятся против такого ресурса и только затем проект отправляется на [[build-боевая-среда]]

## Пайплайн развертывания

- адаптировать ФТ так, чтобы они могли работать с промежучточным сервером (сконфигурировать пути и переменные путей)
- запустить сервер, установить на нем окружение и включить промежуточный и реальный домен
- заимпортить код с git
- реализовать тесты
- построить автоматизацию процесса отправки кода на сервер и тестирования
- еще раз протестировать
- перенести код на бой

## Нюансы

при развертывании надо следить за конфигурацией бд, стат.файлами, зависимостями окружения и пользовательскими настройками, так как они могут сильно различаться в зависимости от целей разработки и развертывания

## Что нужно

- [[nginx]]
- #python
- #git
- [[gunicorn]]
- [[сокеты-unix]]

[[пример-staging]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[build-боевая-среда]: build-боевая-среда "build-боевая-среда"
[fabric]: fabric "fabric"
[тестирование]: ../lists/тестирование "Основные принципы тестровния"
[приемочные-тесты]: приемочные-тесты "приемочные тесты"
[build-боевая-среда]: build-боевая-среда "build-боевая-среда"
[nginx]: nginx "nginx веб-сервер (wsgi)"
[gunicorn]: gunicorn "gunicorn"
[сокеты-unix]: сокеты-unix "сокеты-unix"
[пример-staging]: пример-staging "пример промежуточного сервера"
[//end]: # "Autogenerated link references"