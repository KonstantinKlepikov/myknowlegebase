<!DOCTYPE html>
<html lang="ru_RU">

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Telegram python bots with aiogram | My knowledge base</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Telegram python bots with aiogram" />
<meta property="og:locale" content="ru_RU" />
<meta name="description" content="Aiogram - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–æ–≤–≤ –¥–ª—è telegram –Ω–∞ python" />
<meta property="og:description" content="Aiogram - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–æ–≤–≤ –¥–ª—è telegram –Ω–∞ python" />
<link rel="canonical" href="http://localhost:4000/myknowlegebase/notes/aiogram.html" />
<meta property="og:url" content="http://localhost:4000/myknowlegebase/notes/aiogram.html" />
<meta property="og:site_name" content="My knowledge base" />
<script type="application/ld+json">
{"headline":"Telegram python bots with aiogram","description":"Aiogram - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–æ–≤–≤ –¥–ª—è telegram –Ω–∞ python","@type":"WebPage","url":"http://localhost:4000/myknowlegebase/notes/aiogram.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="keywords" content="">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    
    
    <link rel="stylesheet" href="http://localhost:4000/myknowlegebase/assets/style.css">
    <script async defer src="https://buttons.github.io/buttons.js"></script>

    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->



<!-- Favicon -->
<link rel="icon" href="http://localhost:4000/myknowlegebase/assets/img/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="http://localhost:4000/myknowlegebase/assets/img/favicon.ico" type="image/x-icon">

<!-- Math support -->
<!-- Mathjax Support -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>

<!-- tags collection-->

    







<!-- end custom head snippets -->

</head>

  <body>

    <header class="border-bottom-thick px-2 clearfix">
    <div class="left sm-width-full py-1 mt-1 mt-lg-0">
      <a class="align-middle link-primary text-accent" href="https://konstantinklepikov.github.io/">
        My deep learning
      </a>
    </div>
    <div class="right sm-width-full">
      <ul class="list-reset mt-lg-1 mb-2 mb-lg-1">
        <li class="inline-block">
          <a class="align-middle link-primary mr-2 mr-lg-0 ml-lg-2" href="/myknowlegebase/">
            My knowledge base
          </a>
        </li>
      </ul>
    </div>
  </header>

    <main role="main">

      
<article class="container mx-auto px-2 mt2 mb4">
  <header>
    <h1 class="h1 col-9 sm-width-full py-4 mt-3 inline-block" itemprop="name headline">Telegram python bots with aiogram</h1>
  </header>
  <div class="col-4 sm-width-full border-top-thin">
    <p class="mb-3 h5">–¢–µ–≥–∏:
      
        
        <a href="/myknowlegebase/tag/python" title="python" class="link-tags">python&nbsp;</a>
      
        
        <a href="/myknowlegebase/tag/bots" title="bots" class="link-tags">bots&nbsp;</a>
      
        
        <a href="/myknowlegebase/tag/asynco" title="asynco" class="link-tags">asynco&nbsp;</a>
      
      </p>
  </div>
  <div class="prose mb-4 py-4">
    <h2 id="aiogram"><a href="https://github.com/aiogram/aiogram">aiogram</a></h2>

<p>Is a pretty simple and fully asynchronous framework for Telegram Bot API written in Python 3.7 with [<a href="asyncio" title="Asyncio">asyncio</a>] and [<a href="aiohttp" title="Aiohttp –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç-—Å–≤–µ—Ä–≤–µ—Ä –Ω–∞ python.">aiohttp</a>].</p>

<p><a href="https://docs.aiogram.dev/en/latest/">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a></p>

<p><code class="language-plaintext highlighter-rouge">pip install -U aiogram</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">"""
This is a echo bot.
It echoes any incoming text messages.
"""</span>

<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">aiogram</span> <span class="kn">import</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">Dispatcher</span><span class="p">,</span> <span class="n">executor</span><span class="p">,</span> <span class="n">types</span>

<span class="c1"># Then you have to initialize bot and dispatcher instances.
# Bot token you can get from @BotFather
</span><span class="n">API_TOKEN</span> <span class="o">=</span> <span class="s">'BOT TOKEN HERE'</span>
<span class="c1"># Configure logging
</span><span class="n">logging</span><span class="p">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="p">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="c1"># Initialize bot and dispatcher
</span><span class="n">bot</span> <span class="o">=</span> <span class="n">Bot</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="n">API_TOKEN</span><span class="p">)</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">Dispatcher</span><span class="p">(</span><span class="n">bot</span><span class="p">)</span>

<span class="c1"># interaction with bots starts with one command.
# Register your first command handler
</span><span class="o">@</span><span class="n">dp</span><span class="p">.</span><span class="n">message_handler</span><span class="p">(</span><span class="n">commands</span><span class="o">=</span><span class="p">[</span><span class="s">'start'</span><span class="p">,</span> <span class="s">'help'</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">send_welcome</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">types</span><span class="p">.</span><span class="n">Message</span><span class="p">):</span>
    <span class="s">"""
    This handler will be called when user sends `/start` or `/help` command
    """</span>
    <span class="k">await</span> <span class="n">message</span><span class="p">.</span><span class="n">reply</span><span class="p">(</span><span class="s">"Hi!</span><span class="se">\n</span><span class="s">I'm EchoBot!</span><span class="se">\n</span><span class="s">Powered by aiogram."</span><span class="p">)</span>

<span class="c1"># If you want to handle all text messages in
# the chat simply add handler without filters
</span><span class="o">@</span><span class="n">dp</span><span class="p">.</span><span class="n">message_handler</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">echo</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">types</span><span class="p">.</span><span class="n">Message</span><span class="p">):</span>
    <span class="c1"># old style:
</span>    <span class="c1"># await bot.send_message(message.chat.id, message.text)
</span>    <span class="k">await</span> <span class="n">message</span><span class="p">.</span><span class="n">answer</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">executor</span><span class="p">.</span><span class="n">start_polling</span><span class="p">(</span><span class="n">dp</span><span class="p">,</span> <span class="n">skip_updates</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<p><a href="https://docs.aiogram.dev/en/latest/examples/index.html">–ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤</a></p>

<p>–ê–ü–ò —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –∫–ª–∞—Å—Å–æ–≤ <code class="language-plaintext highlighter-rouge">Bot</code>–∏ <code class="language-plaintext highlighter-rouge">Dispatcher</code>. Bot —Ä–µ–∞–ª–∏–∑—É–µ—Ç [<a href="aiohttp" title="Aiohttp –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç-—Å–≤–µ—Ä–≤–µ—Ä –Ω–∞ python.">aiohttp</a>] —Å–µ—Ä–≤–µ—Ä –∏ —Å–≤—è–∑–∫—É —Å api telegram. Dispatcher –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: —Å–æ–æ–±—â–µ–Ω–∏—è, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –∑–∞–ø—Ä–æ—Å—ã –∫–æ–ª–±–µ–∫–æ–≤, –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É, –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–µ—á–µ–∫–∞—É—Ç–∞. <code class="language-plaintext highlighter-rouge">execitor</code> —ç—Ç–æ <a href="https://docs.aiogram.dev/en/latest/utils/executor.html">—Ö–µ–ª–ø–µ—Ä</a> –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–∞—Ö, –∫ –ø—Ä–∏–º–µ—Ä—É –Ω–∏–∂–µ –≤ long-polling mode.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bot</span> <span class="o">=</span> <span class="n">Bot</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="n">API_TOKEN</span><span class="p">)</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">Dispatcher</span><span class="p">(</span><span class="n">bot</span><span class="p">)</span>

<span class="o">@</span><span class="n">dp</span><span class="p">.</span><span class="n">message_handler</span><span class="p">(</span><span class="n">regexp</span><span class="o">=</span><span class="s">'(^cat[s]?$|puss)'</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">cats</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">types</span><span class="p">.</span><span class="n">Message</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'data/cats.jpg'</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">photo</span><span class="p">:</span>
        <span class="s">'''
        # Old fashioned way:
        await bot.send_photo(
            message.chat.id,
            photo,
            caption='Cats are here üò∫',
            reply_to_message_id=message.message_id,
        )
        '''</span>

        <span class="k">await</span> <span class="n">message</span><span class="p">.</span><span class="n">reply_photo</span><span class="p">(</span><span class="n">photo</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s">'Cats are here üò∫'</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">executor</span><span class="p">.</span><span class="n">start_polling</span><span class="p">(</span><span class="n">dp</span><span class="p">,</span> <span class="n">skip_updates</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<p>–ü–æ–¥—Ä–æ–±–Ω–µ–µ:</p>

<ul>
  <li><a href="https://docs.aiogram.dev/en/latest/telegram/bot.html">Bot object</a></li>
  <li><a href="https://docs.aiogram.dev/en/latest/dispatcher/index.html">Dispatcher</a></li>
  <li><a href="https://docs.aiogram.dev/en/latest/utils/executor.html">Executor</a></li>
</ul>

<h3 id="bot-class"><a href="https://docs.aiogram.dev/en/latest/telegram/bot.html#telegram-bot">Bot</a> class</h3>

<p>–ú–µ—Ç–æ–¥—ã:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">download_file_by_id</code> –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª –ø–æ file_id –≤ —Ü–µ–ª–µ–≤–æ–π —Ñ–∞–π–ª –∏–ª–∏ –∫–∞—Ç–∞–ª–æ–≥</li>
  <li><code class="language-plaintext highlighter-rouge">get_updates</code> –ø–æ–ª—É—á–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é long polling</li>
  <li><code class="language-plaintext highlighter-rouge">set_webhook</code> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å URL-–∞–¥—Ä–µ—Å –∏ –ø–æ–ª—É—á–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∏—Å—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫. –í—Å—è–∫–∏–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –¥–ª—è –±–æ—Ç–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º HTTPS-–∑–∞–ø—Ä–æ—Å POST –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π URL-–∞–¥—Ä–µ—Å, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ JSON. –í —Å–ª—É—á–∞–µ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –º—ã –æ—Ç–∫–∞–∂–µ–º—Å—è –ø–æ—Å–ª–µ —Ä–∞–∑—É–º–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ø—ã—Ç–æ–∫. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç <code class="language-plaintext highlighter-rouge">True</code> –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞.</li>
  <li><code class="language-plaintext highlighter-rouge">delete_webhook</code> —É–¥–∞–ª–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –≤–µ–±—Ö—É–∫–æ–º</li>
  <li><code class="language-plaintext highlighter-rouge">get_webhook_info</code></li>
  <li><code class="language-plaintext highlighter-rouge">get_me</code> simple method for testing your bot‚Äôs auth token</li>
  <li><code class="language-plaintext highlighter-rouge">log_out</code> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –¥–ª—è –ª–æ–≥–∞—É—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ API –ø–µ—Ä–µ–¥ –ª–æ–∫–∞–ª—å–Ω—ã–º –∑–∞–ø—É—Å–∫–æ–º –±–æ—Ç–∞. –í—ã –¥–æ–ª–∂–Ω—ã –≤—ã–π—Ç–∏, –ø—Ä–µ–∂–¥–µ —á–µ–º –∑–∞–ø—É—Å–∫–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ, –∏–Ω–∞—á–µ –Ω–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏, —á—Ç–æ –±–æ—Ç –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ –≤—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ —Å–Ω–æ–≤–∞ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É —Å —Ç–µ–º –∂–µ —Ç–æ–∫–µ–Ω–æ–º –≤ —Ç–µ—á–µ–Ω–∏–µ 10 –º–∏–Ω—É—Ç. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç <code class="language-plaintext highlighter-rouge">True</code> –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞.</li>
  <li><code class="language-plaintext highlighter-rouge">close_bot</code> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥, —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞ –ø–µ—Ä–µ–¥ –µ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ–º —Å –æ–¥–Ω–æ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –¥—Ä—É–≥–æ–π. –í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–∞–ª–∏—Ç—å –≤–µ–±—Ö—É–∫ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –±–æ—Ç –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Å–Ω–æ–≤–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞. –ú–µ—Ç–æ–¥ –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É 429 –≤ –ø–µ—Ä–≤—ã–µ 10 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç True –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞</li>
  <li><code class="language-plaintext highlighter-rouge">send_message</code> –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π</li>
  <li><code class="language-plaintext highlighter-rouge">forward_message</code></li>
  <li><code class="language-plaintext highlighter-rouge">copy_message</code></li>
  <li><code class="language-plaintext highlighter-rouge">send_photo</code></li>
  <li><code class="language-plaintext highlighter-rouge">send_audio</code></li>
  <li><code class="language-plaintext highlighter-rouge">send_document</code></li>
  <li><code class="language-plaintext highlighter-rouge">send_video</code></li>
  <li><code class="language-plaintext highlighter-rouge">send_animation</code></li>
  <li><code class="language-plaintext highlighter-rouge">send_voice</code></li>
  <li><code class="language-plaintext highlighter-rouge">send_video_note</code></li>
  <li><code class="language-plaintext highlighter-rouge">send_media_group</code></li>
  <li><code class="language-plaintext highlighter-rouge">send_location</code></li>
  <li>many send methods and chat_methods</li>
</ul>

<h3 id="dispatcher-class"><a href="https://docs.aiogram.dev/en/latest/dispatcher/index.html#dispatcher-class">Dispatcher</a> class</h3>

<p>–ú–µ—Ç–æ–¥—ã:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">skip_updates</code> –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –≤—Ö–æ–¥—è—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ –ø—Ä–æ–¥–µ</li>
  <li><code class="language-plaintext highlighter-rouge">process_updates</code> –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π</li>
  <li><code class="language-plaintext highlighter-rouge">process_update</code></li>
  <li><code class="language-plaintext highlighter-rouge">reset_webhook</code></li>
  <li><code class="language-plaintext highlighter-rouge">start_polling</code> —Å—Ç–∞—Ä—Ç long-polling</li>
  <li><code class="language-plaintext highlighter-rouge">stop_polling</code></li>
  <li><code class="language-plaintext highlighter-rouge">wait_closed</code> –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è long pooling</li>
  <li><code class="language-plaintext highlighter-rouge">is_polling</code></li>
  <li><code class="language-plaintext highlighter-rouge">message_handler</code> –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Simple commands handler
</span><span class="o">@</span><span class="n">dp</span><span class="p">.</span><span class="n">message_handler</span><span class="p">(</span><span class="n">commands</span><span class="o">=</span><span class="p">[</span><span class="s">'start'</span><span class="p">,</span> <span class="s">'welcome'</span><span class="p">,</span> <span class="s">'about'</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">cmd_handler</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">types</span><span class="p">.</span><span class="n">Message</span><span class="p">):</span>
    <span class="p">...</span>

<span class="c1"># Filter messages by regular expression
</span><span class="o">@</span><span class="n">dp</span><span class="p">.</span><span class="n">message_handler</span><span class="p">(</span><span class="n">regexp</span><span class="o">=</span><span class="s">'^[a-z]+-[0-9]+'</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">msg_handler</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">types</span><span class="p">.</span><span class="n">Message</span><span class="p">):</span>
    <span class="p">...</span>

<span class="c1"># Filter messages by command regular expression
</span><span class="o">@</span><span class="n">dp</span><span class="p">.</span><span class="n">message_handler</span><span class="p">(</span><span class="n">filters</span><span class="p">.</span><span class="n">RegexpCommandsFilter</span><span class="p">(</span><span class="n">regexp_commands</span><span class="o">=</span><span class="p">[</span><span class="s">'item_([0-9]*)'</span><span class="p">]))</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">send_welcome</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">types</span><span class="p">.</span><span class="n">Message</span><span class="p">):</span>
    <span class="p">...</span>

<span class="c1"># Filter by content type
</span><span class="o">@</span><span class="n">dp</span><span class="p">.</span><span class="n">message_handler</span><span class="p">(</span><span class="n">content_types</span><span class="o">=</span><span class="n">ContentType</span><span class="p">.</span><span class="n">PHOTO</span> <span class="o">|</span> <span class="n">ContentType</span><span class="p">.</span><span class="n">DOCUMENT</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">audio_handler</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">types</span><span class="p">.</span><span class="n">Message</span><span class="p">):</span>
    <span class="p">...</span>

<span class="c1"># Filter by custom function
</span><span class="o">@</span><span class="n">dp</span><span class="p">.</span><span class="n">message_handler</span><span class="p">(</span><span class="k">lambda</span> <span class="n">message</span><span class="p">:</span> <span class="n">message</span><span class="p">.</span><span class="n">text</span> <span class="ow">and</span> <span class="s">'hello'</span> <span class="ow">in</span> <span class="n">message</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">lower</span><span class="p">())</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">text_handler</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">types</span><span class="p">.</span><span class="n">Message</span><span class="p">):</span>
    <span class="p">...</span>

<span class="c1"># Use multiple filters
</span><span class="o">@</span><span class="n">dp</span><span class="p">.</span><span class="n">message_handler</span><span class="p">(</span><span class="n">commands</span><span class="o">=</span><span class="p">[</span><span class="s">'command'</span><span class="p">],</span> <span class="n">content_types</span><span class="o">=</span><span class="n">ContentType</span><span class="p">.</span><span class="n">TEXT</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">text_handler</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">types</span><span class="p">.</span><span class="n">Message</span><span class="p">):</span>
    <span class="p">...</span>

<span class="c1"># Register multiple filters set for one handler
</span><span class="o">@</span><span class="n">dp</span><span class="p">.</span><span class="n">message_handler</span><span class="p">(</span><span class="n">commands</span><span class="o">=</span><span class="p">[</span><span class="s">'command'</span><span class="p">])</span>
<span class="o">@</span><span class="n">dp</span><span class="p">.</span><span class="n">message_handler</span><span class="p">(</span><span class="k">lambda</span> <span class="n">message</span><span class="p">:</span> <span class="n">demojize</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">text</span><span class="p">)</span> <span class="o">==</span> <span class="s">':new_moon_with_face:'</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">text_handler</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">types</span><span class="p">.</span><span class="n">Message</span><span class="p">):</span>
    <span class="p">...</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">register_edited_message_handler</code> –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è</li>
  <li><code class="language-plaintext highlighter-rouge">edited_message_handler</code> –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä</li>
  <li>and ome register and decorator method for many types of messages</li>
  <li><code class="language-plaintext highlighter-rouge">current_state</code> –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —á–∞—Ç–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞</li>
  <li><code class="language-plaintext highlighter-rouge">throttle</code></li>
  <li><code class="language-plaintext highlighter-rouge">check_key</code> –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª—é—á–µ –≤ –±–∞–∫–µ—Ç–µ</li>
  <li><code class="language-plaintext highlighter-rouge">release_key</code> –≤—ã–ø—É—Å—Ç–∏—Ç—å –∑–∞–ª–æ—á–µ–Ω–Ω—ã–π –∫–ª—é—á</li>
  <li><code class="language-plaintext highlighter-rouge">async_task</code> –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ö–µ–Ω–¥–ª–µ—Ä –∫–∞–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ç–∞—Å–∫. –≠—Ç–æ –Ω–∞–¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤ —Å —Ç–∞–π–º–æ—É—Ç–æ–º.</li>
  <li><code class="language-plaintext highlighter-rouge">throttled</code></li>
  <li><code class="language-plaintext highlighter-rouge">bind_filter</code>, <code class="language-plaintext highlighter-rouge">unbind_filter</code></li>
  <li><code class="language-plaintext highlighter-rouge">setup_middleware</code></li>
</ul>

<h2 id="aiogram-3x">Aiogram 3.x</h2>

<p>–ù–∞—á–∏–Ω–∞—è —Å 3.x –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å aiogram –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–º–µ–Ω—è–ª—Å—è.</p>

<ul>
  <li><a href="https://mastergroosha.github.io/aiogram-3-guide/">–ø–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ –ø–æ –Ω–æ–≤–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É</a></li>
  <li><a href="https://docs.aiogram.dev/en/dev-3.x/index.html">docs</a></li>
  <li><a href="https://github.com/Tishka17/aiogram_dialog">aiogram_dialog</a> is a framework for developing interactive messages and menus in your telegram bot like a normal GUI application. <a href="https://aiogram-dialog.readthedocs.io/en/latest/">docs</a></li>
  <li><a href="https://github.com/aiogram/magic-filter/">magic-filter</a>fro aiogram provides magic filter based on dynamic attribute getter</li>
  <li><a href="https://tproger.ru/translations/finite-state-machines-theory-and-implementation/">–∫–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã</a></li>
</ul>

<p>–°–º–æ—Ç—Ä–∏ –µ—â–µ:</p>

<ul>
  <li><a href="https://docs.aiogram.dev/en/latest/examples/index.html">–ø—Ä–∏–º–µ—Ä—ã —Å aiogram</a></li>
  <li><a href="https://mastergroosha.github.io/aiogram-3-guide/">–ü–∏—à–µ–º Telegram-–±–æ—Ç–æ–≤ —Å aiogram 3.x</a> –Ω–µ–ø–ª–æ—Ö–æ–µ –∏ –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ</li>
  <li>[<a href="aiogram-dialog" title="Aiogram extention aiogram-dialog">aiogram-dialog</a>]</li>
  <li>[<a href="telegram-bots" title="Telegram python bots">telegram-bots</a>]</li>
  <li>[<a href="aiohttp" title="Aiohttp –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç-—Å–≤–µ—Ä–≤–µ—Ä –Ω–∞ python.">aiohttp</a>]</li>
  <li>[<a href="asyncio" title="Asyncio">asyncio</a>]</li>
</ul>


  </div>
</article>


    </main>

    <footer role="banner">
<div class="border-top-thin clearfix mt-2 mt-lg-4">
    <div class="container mx-auto px-2">
      <p class="col-8 sm-width-full left py-2 mb-0"><a href="/myknowlegebase/">My knowledge base</a> –ø—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è <a class="text-accent" href="https://github.com/KonstantinKlepikov">KonstantinKlepikov</a></p>
      <ul class="list-reset right clearfix sm-width-full py-2 mb-2 mb-lg-0">
        <li class="inline-block mr-1">
          <a href="https://twitter.com/share" class="twitter-share-button" data-hashtags="My knowledge base">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </li>
      </ul>
    </div>
  </div>
</footer>

  </body>

</html>

<script type="text/javascript">
  // Hack: Replace page-link with "Page Title"
  document.querySelectorAll(".markdown-body a[title]").forEach((a) => {
    a.innerText = a.title;
  });
  // Hack: Remove .md extension from wikilinks to get the html in jekyll
  document.querySelectorAll("a").forEach(l => {
    if (l.href.endsWith('.md')) {
      l.href = l.href.substring(0, l.href.length-3)
    }
  })
</script>